<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="http://github.com/CrawlerJS/CrawlerJS">crawler-js (v2.0.1)</a>
</h1>
<h4>Opensource Framework Crawler in Node.js</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.crawler-js">module crawler-js</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.crawler-js.crawler-js">
            function <span class="apidocSignatureSpan"></span>crawler-js
            <span class="apidocSignatureSpan">(font, config)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">crawler-js.</span>get_html</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">crawler-js.</span>map_urls</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">crawler-js.</span>utils</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.crawler-js.get_html">module crawler-js.get_html</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.crawler-js.get_html.getHtml">
            function <span class="apidocSignatureSpan">crawler-js.get_html.</span>getHtml
            <span class="apidocSignatureSpan">(font, url, config)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.crawler-js.map_urls">module crawler-js.map_urls</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.crawler-js.map_urls.getAttributes">
            function <span class="apidocSignatureSpan">crawler-js.map_urls.</span>getAttributes
            <span class="apidocSignatureSpan">(entry, config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.crawler-js.map_urls.getEntry">
            function <span class="apidocSignatureSpan">crawler-js.map_urls.</span>getEntry
            <span class="apidocSignatureSpan">(font, url, config)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.crawler-js.utils">module crawler-js.utils</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.crawler-js.utils.at">
            function <span class="apidocSignatureSpan">crawler-js.utils.</span>at
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.crawler-js.utils.clone">
            function <span class="apidocSignatureSpan">crawler-js.utils.</span>clone
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.crawler-js.utils.getParams">
            function <span class="apidocSignatureSpan">crawler-js.utils.</span>getParams
            <span class="apidocSignatureSpan">(qs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.crawler-js.utils.getUuid">
            function <span class="apidocSignatureSpan">crawler-js.utils.</span>getUuid
            <span class="apidocSignatureSpan">(mask)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.crawler-js.utils.objectLength">
            function <span class="apidocSignatureSpan">crawler-js.utils.</span>objectLength
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.crawler-js.utils.rawUrl">
            function <span class="apidocSignatureSpan">crawler-js.utils.</span>rawUrl
            <span class="apidocSignatureSpan">(val, encode)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.crawler-js" id="apidoc.module.crawler-js">module crawler-js</a></h1>


    <h2>
        <a href="#apidoc.element.crawler-js.crawler-js" id="apidoc.element.crawler-js.crawler-js">
        function <span class="apidocSignatureSpan"></span>crawler-js
        <span class="apidocSignatureSpan">(font, config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">crawler-js = function (font, config){
  if(typeof config == 'undefined'){var config = {};}
  if(typeof font.preview == 'undefined'){font.preview = 0;}
  if(typeof font.tryAgain == 'undefined'){font.tryAgain = 0;}

  font.type = 'get',
  font.getAttributes = [],
  font.getCurrentEntry = 0,
  font.postAttributes = [],
  font.postCurrentEntry = 0;

  if(font.preview &lt; 2){
    font.getAttributes = map_urls.getAttributes(font.get,config);
    font.postAttributes = map_urls.getAttributes(font.post,config);
    map_urls.getEntry(font,{get:font['get']},config);
  }else{
    map_urls.getEntry(font,{get:font['getSample']},config);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>








</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.crawler-js.get_html" id="apidoc.module.crawler-js.get_html">module crawler-js.get_html</a></h1>


    <h2>
        <a href="#apidoc.element.crawler-js.get_html.getHtml" id="apidoc.element.crawler-js.get_html.getHtml">
        function <span class="apidocSignatureSpan">crawler-js.get_html.</span>getHtml
        <span class="apidocSignatureSpan">(font, url, config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getHtml = function (font, url, config){
  if(typeof font.statusHeader == 'undefined'){font.statusHeader = [200];}
  var agent = random_agent();
  var options = {
    url: url.get,
    strictSSL: false,
    pool: {maxSockets: 999},
    jar:true,
    followRedirect: true,
    maxRedirects: 10,
    headers: {
      'User-Agent': agent,
      'Content-Type': 'application/x-www-form-urlencoded'
    }
  };
  if(typeof font.timeout != 'undefined'){
    options.timeout = font.timeout;
  }else{
    options.timeout = 30000;
  }
  if(typeof font.encoding != 'undefined' &amp;&amp; font.encoding == 'binary'){
    options.encoding = font.encoding;
  }
  if(typeof config.localProxy != 'undefined'){
    if(config.proxy == 'random'){
      options.proxy = getRandomProxy();
    }else{
      options.proxy = config.localProxy;
    }
  }
  if(typeof config.oauth != 'undefined'){
    options.oauth = config.oauth;
  }
  if(typeof config.auth != 'undefined'){
    options.auth = config.auth;
<span class="apidocCodeCommentSpan">  /*'auth': {
    'user': 'username',
    'pass': 'password',
    'sendImmediately': false
  }*/
</span>  }
  if(font.preview === 3){
    if(typeof font.postSample != 'undefined'){
      options.form = querystring.parse(font.postSample);
    }
  }else{
    if(typeof font.post != 'undefined'){
      options.form = querystring.parse(url.post);
    }
  }
  if(font.preview === 3){
    if(typeof font.refererSample != 'undefined'){
      options.headers.referer = querystring.parse(font.refererSample);
    }
  }else{
    if(typeof font.referer != 'undefined'){
      options.headers.referer = querystring.parse(font.referer);
    }
  }

  var cookieOptions = utils.clone(options);
  cookieOptions.url = font.cookie;

  var getCookie = 0;

  if(font.preview === 3){
    if(typeof font.cookieSample != 'undefined'){
      getCookie = 1;
    }
  }else{
    if(typeof font.cookie != 'undefined'){
      getCookie = 2;
    }
  }

  if(getCookie &gt; 0){
    if(getCookie == 2){
      cookieOptions.url = font.cookie;
    }else{
      cookieOptions.url = font.cookieSample;
    }
    request(cookieOptions,function(){
      request(options,function(e,r,body){getUrl(font,url,config,e,r,body)});
    });
  }else{
    request(options,function(e,r,body){getUrl(font,url,config,e,r,body)});
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var putItem = function (font,url,config){
if((font['get'] != '' &amp;&amp; font['post'] == '') || (font['get'] != '
;' &amp;&amp; font['post'] != '' &amp;&amp; font['type'] == 'post')){
  if(font.preview === 1){
    console.log(JSON.stringify(url));
  }else{
    var font = utils.clone(font);
    var url = utils.clone(url);
    get_html.<span class="apidocCodeKeywordSpan">getHtml</span>(font,url,config);
  }
}else{
  font['type'] = "post";
  var fontTemp = utils.clone(font);
  fontTemp[font['type']+'CurrentEntry']=0;
  getEntry(fontTemp,url,config);
  font['type'] = "get";
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.crawler-js.map_urls" id="apidoc.module.crawler-js.map_urls">module crawler-js.map_urls</a></h1>


    <h2>
        <a href="#apidoc.element.crawler-js.map_urls.getAttributes" id="apidoc.element.crawler-js.map_urls.getAttributes">
        function <span class="apidocSignatureSpan">crawler-js.map_urls.</span>getAttributes
        <span class="apidocSignatureSpan">(entry, config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getAttributes = function (entry, config){
  var csv = /\[csv:[^:]{0,}:[^:]{0,}:(.[0-9]{0,10}?):(.[0-9]{0,10}?)\]/gim;
  var mongodb = /\[mongodb:[^:]{0,}:[^:]{0,}:[^:]{0,}\]/gim;
  var words = /\[words:\[[^\]]{0,}\]\]/gim;
  var numbers = /\[numbers:(.[0-9]{0,10}?):(.[0-9]{0,10}?):(.[0-9]{0,10}?)\]/gim;
  var letters = /\[letters:(.[0-9]{0,}?)\]/gim;
  var types = [];

  if(words.test(entry) == true){
    var types = types.concat(entry.match(words));
  }
  if(numbers.test(entry) == true){
    var types = types.concat(entry.match(numbers));
  }
  if(letters.test(entry) == true){
    var types = types.concat(entry.match(letters));
  }
  if(mongodb.test(entry) == true){
    var types = types.concat(entry.match(mongodb));
  }
  if(csv.test(entry) == true){
    var types = types.concat(entry.match(csv));
  }
  var allAttributes = [];
  for(n in types){
    var url = types[n].replace(/(\[|\])/gim,'');
    var attribute = url.split(':');

    var attributes = [];
    attributes['name'] = attribute[0];
    attributes['parameter'] = types[n];

    if(attribute[0] == 'words'){
      attribute = attribute.splice(1);
      attributes['init'] = 0;
      attributes['words'] = attribute;
      attributes['total'] = attribute.length-1;
    }
    else if(attribute[0] == 'numbers'){
      attributes['init'] = parseInt(attribute[1]);
      attributes['size'] = parseInt(attribute[2]);
      attributes['diff'] = parseInt(attribute[3]);
      attributes['total'] = parseInt((attributes['size']-attributes['init'])/attributes['diff']);
    }
    else if(attribute[0] == 'letters'){
      attributes['init'] = 0;
      attributes['letters'] = lettersCombinations(parseInt(attribute[1]));
      attributes['total'] = attributes['letters'].length-1;
    }
    else if(attribute[0] == 'mongodb'){
      attributes['collection'] = attribute[1];
      attributes['key'] = attribute[2];
      attributes['id'] = attribute[3];
      if(typeof dbUrls == 'undefined'){
        dbUrls = mongoq(config.mongoDB, {auto_reconect:false, safe:false, timeout: 1, host:config.mongoDBHost, port:config.mongoDBPort
});
      }
    }
    else if(attribute[0] == 'csv'){
      attributes['file'] = attribute[1];
      attributes['delimiter'] = attribute[2];
      attributes['data'] = attribute[3];
      attributes['csvId'] = attribute[4];
      attributes['total'] = 0;
    }
    if(attributes['total'] == 0){attributes['total']=1;}
    attributes['first']=1;
    allAttributes[n] = attributes;
  }
  return allAttributes;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.crawler-js.map_urls.getEntry" id="apidoc.element.crawler-js.map_urls.getEntry">
        function <span class="apidocSignatureSpan">crawler-js.map_urls.</span>getEntry
        <span class="apidocSignatureSpan">(font, url, config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getEntry = function (font, url, config){
  if(typeof font[font['type']+'Attributes'][font[font['type']+'CurrentEntry']] !== 'undefined'){
    for(var c = font[font['type']+'Attributes'].length-1; c&gt;=0; c--){
      if(c == font[font['type']+'Attributes'].length-1){
        font[font['type']+'Attributes'][c]['interval'] = font.interval;
      }else{
        font[font['type']+'Attributes'][c]['interval'] = font[font['type']+'Attributes'][c+1]['interval']*(font[font['type']+'Attributes
'][c+1]['total']+1);
      }
    }
    var count = 0;
    if(font[font['type']+'Attributes'][font[font['type']+'CurrentEntry']]['first'] == 1){
      font[font['type']+'Attributes'][font[font['type']+'CurrentEntry']]['first'] = 0;
      getTypeUrl(font,url,config);
      count++;
    }
    if(font[font['type']+'Attributes'][font[font['type']+'CurrentEntry']]['name'] != 'csv'){
      var i = setInterval(function(){
        getTypeUrl(font,url,config);
        count++;
        if(count &gt; font[font['type']+'Attributes'][font[font['type']+'CurrentEntry']]['total']){
          clearInterval(i);
        }
      }, font[font['type']+'Attributes'][font[font['type']+'CurrentEntry']]['interval']);
    }
  }else{
    if(font[font['type']+'Attributes'].length == 0){
      if(font.preview &gt; 1){
        url['get'] = font['getSample'];
        if(font['postSample'] != ''){
          url['post'] = font['postSample'];
        }
      }else{
        url['get'] = font['get'];
        if(font['post'] != ''){
          url['post'] = font['post'];
        }
      }
    }
    putItem(font,url,config);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.crawler-js.utils" id="apidoc.module.crawler-js.utils">module crawler-js.utils</a></h1>


    <h2>
        <a href="#apidoc.element.crawler-js.utils.at" id="apidoc.element.crawler-js.utils.at">
        function <span class="apidocSignatureSpan">crawler-js.utils.</span>at
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">at = function (){
  return String(new Date().getTime());
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.crawler-js.utils.clone" id="apidoc.element.crawler-js.utils.clone">
        function <span class="apidocSignatureSpan">crawler-js.utils.</span>clone
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">clone = function (obj){
  if(obj === null || typeof obj  !== 'object'){
  return obj;
  }else{
  var temp = obj.constructor();
  for(var key in obj){
    temp[key] = this.clone(obj[key]);
  }
  return temp;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  }
}else{
  if(typeof font.referer != 'undefined'){
    options.headers.referer = querystring.parse(font.referer);
  }
}

var cookieOptions = utils.<span class="apidocCodeKeywordSpan">clone</span>(options);
cookieOptions.url = font.cookie;

var getCookie = 0;

if(font.preview === 3){
  if(typeof font.cookieSample != 'undefined'){
    getCookie = 1;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.crawler-js.utils.getParams" id="apidoc.element.crawler-js.utils.getParams">
        function <span class="apidocSignatureSpan">crawler-js.utils.</span>getParams
        <span class="apidocSignatureSpan">(qs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getParams = function (qs){
  var qs = qs.split("+").join(" ");
  var params = {}, tokens,
  re = /[?&amp;]?([^=]+)=([^&amp;]*)/g;
  var first = 1;
  while (tokens = re.exec(qs)){
    if(first == 1){
      var tempParam = tokens[1].split('?');
      params[decodeURIComponent(tempParam[1])] = decodeURIComponent(tokens[2]);
      first = 0;
    }else{
    params[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);
    }
  }
  return params;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.crawler-js.utils.getUuid" id="apidoc.element.crawler-js.utils.getUuid">
        function <span class="apidocSignatureSpan">crawler-js.utils.</span>getUuid
        <span class="apidocSignatureSpan">(mask)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getUuid = function (mask){
  return mask.replace(/[xy]/g, function(c) {var r = Math.random()*16|0,v=c=='x'?r:r&amp;0x3|0x8;return v.toString(16);});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.crawler-js.utils.objectLength" id="apidoc.element.crawler-js.utils.objectLength">
        function <span class="apidocSignatureSpan">crawler-js.utils.</span>objectLength
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">objectLength = function (obj){
  var size = 0;
  for(var key in obj){
  if(obj.hasOwnProperty(key)) size++;
  }
  return size;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.crawler-js.utils.rawUrl" id="apidoc.element.crawler-js.utils.rawUrl">
        function <span class="apidocSignatureSpan">crawler-js.utils.</span>rawUrl
        <span class="apidocSignatureSpan">(val, encode)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">rawUrl = function (val, encode){
  if(typeof encode == 'undefined'){encode=1;}
  var len = val.length;
  var backlen = len;
  var i = 0;
  var newStr = "";
  var frag = "";
  var encval = "";
  var original = val;
  if(encode == 0){
    while(backlen &gt; 0){
      var lastpercent = val.lastIndexOf("%");
      if(lastpercent != -1){
        frag = val.substring(lastpercent+1,val.length);
        val  = val.substring(0,lastpercent);
        if(frag.length &gt;= 2){
          encval = frag.substring(0,2);
          newStr = frag.substring(2,frag.length) + newStr;
          if("01234567890abcdefABCDEF".indexOf(encval.substring(0,1)) != -1 &amp;&amp; "01234567890abcdefABCDEF".indexOf(encval.substring
(1,2)) != -1){
            encval = String.fromCharCode(parseInt(encval, 16));
            newStr = encval + newStr;
          }
        }
        backlen = lastpercent;
      }else{newStr = val + newStr; backlen = 0;}
    }
  }else{
    for(i=0;i&lt;len;i++){
      if (val.substring(i,i+1).charCodeAt(0) &lt; 255){
        if(isUnsafe(val.substring(i,i+1)) == false){
          newStr = newStr + val.substring(i,i+1);
        }else{
          newStr = newStr + convert(val.substring(i,i+1));
        }
      }else{
        console.log("Found a non-ISO-8859-1 character at position: " + (i+1) + ",\nPlease eliminate before continuing.");
        document.forms[0].state.value = "none";
        document.forms[0].enc[0].checked = true;
        newStr = original; i=len;
      }
    }
  }
  return newStr;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>